!function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return r(n?n:e)},f,f.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CrossMessage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("./utils"),s=(0,i.eventListener)(),a=s.addEventListener,u=(s.removeEventListener,0),c="__request-",f="__response-",d=new RegExp("^(\\d+)"+c+"(.*)"),l=new RegExp("^(\\d+)"+f+"(.*)"),p="resolved",v="rejected",m=n.CrossMessage=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!(0,i.getPromise)())throw new Error('No "Promise" feature available in browser, must specify another promise lib');if(!n.otherWindow)throw new Error("Must specify at least one window to communicate with");n=(0,i.assign)(n,{thisWindow:window,domain:"*",knownWindowOnly:!0});var r=n.thisWindow,s=this._otherWin=n.otherWindow,u=!!n.knownWindowOnly;this._domain=n.domain,this._callbacks={},this._promises={},a(r,"message",function(e){if(!u||s===e.source){t._domain||(t._domain=e.origin||e.originalEvent.origin);var n=e.data,o=void 0,r=void 0;(o=n.$type.match(d))?t._handleReq(e,n,o[1],o[2]):(r=n.$type.match(l))&&t._handleResp(e,n,r[1],r[2])}})}return r(e,null,[{key:"usePromise",value:function(e){(0,i.setPromise)(e)}}]),r(e,[{key:"postEvent",value:function(e,t){var n=(0,i.getPromise)().defer();return++u,this._otherWin.postMessage({$type:""+u+c+e,$data:t},this._domain),(this._promises[""+u+e]=n).promise}},{key:"onEvent",value:function(e,t){this._callbacks[e]=t}},{key:"offEvent",value:function(e,t){delete this._callbacks[e]}},{key:"_handleReq",value:function(e,t,n,o){var r=this._callbacks[o],s="function"==typeof r?r(t.$data):{status:v,message:"No specified callback of "+o},a=""+n+f+o,u=e.source,c=this._domain;return(0,i.isPromise)(s)?void s.then(function(e){u.postMessage({$type:a,$data:{status:p,message:e}},c)},function(e){u.postMessage({$type:a,$data:{status:v,message:e}},c)}):((0,i.isObject)(s)&&s.status||(s={status:s?p:v,message:s}),void u.postMessage({$type:a,$data:s},c))}},{key:"_handleResp",value:function(e,t,n,o){var r=t.$data,i=r.status.toLocaleLowerCase()===p?"resolve":"reject",s=""+n+o;this._promises[s][i](t.$data.message),delete this._promises[s]}}]),e}();"undefined"!=typeof window&&(window.CrossMessage=m)},{"./utils":2}],2:[function(e,t,n){"use strict";function o(e){var t="undefined"==typeof e?"undefined":c(e);return"function"===t||"object"===t&&!!e}function r(e){if(!o(e))return e;if("function"==typeof Object.assign)return Object.assign.apply(null,arguments);var t,n,r,i;for(r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s)}else e[n]=t[n]}return e}function i(e){return o(e)&&"function"==typeof e.then}function s(e){f=e}function a(){return f}function u(){var e=!!window.document.addEventListener;return{addEventListener:e?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},removeEventListener:e?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)}}}Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.isObject=o,n.assign=r,n.isPromise=i,n.setPromise=s,n.getPromise=a,n.eventListener=u;var f="undefined"==typeof Promise?null:Promise},{}]},{},[1]);