!function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CrossMessage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("./utils"),s=(0,i.eventListener)(),a=s.addEventListener,u=s.removeEventListener,f=0,c="__request-",l="__response-",d=new RegExp("^(\\d+)"+c+"(.*)"),p=new RegExp("^(\\d+)"+l+"(.*)"),v="resolved",y="rejected",m="function"==typeof Promise,h=!1,w=n.CrossMessage=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!(0,i.getPromise)())throw new Error('No "Promise" feature available in browser, must specify another promise lib');if(!n.otherWindow)throw new Error('Must specify "otherWindow" to communicate with');n=(0,i.assign)({thisWindow:window,domain:"*",knownWindowOnly:!0},n);var r=this._thisWin=n.thisWindow,s=this._otherWin=n.otherWindow,u=!!n.knownWindowOnly;this._domain=n.domain,this._callbacks={},this._promises={},a(r,"message",this._listener=function(e){if(!u||s===e.source){t._domain||(t._domain=e.origin||e.originalEvent.origin);var n=e.data,o=void 0,r=void 0;n.$type&&((o=n.$type.match(d))?t._handleReq(e,n,o[1],o[2]):(r=n.$type.match(p))&&t._handleResp(e,n,r[1],r[2]))}})}return r(e,null,[{key:"usePromise",value:function(e){(0,i.setPromise)(e),m="function"==typeof e,h="function"==typeof e.defer}}]),r(e,[{key:"post",value:function(e,t){var n=this,o=(0,i.getPromise)(),r=function(o,r){++f,n._otherWin.postMessage({$type:""+f+c+e,$data:t},n._domain),n._promises[""+f+e]={resolve:o,reject:r}};if(m)return new o(function(e,t){r(e,t)});if(h){var s=o.defer();return r(s.resolve,s.reject),s.promise}throw new Error("Unknown promise.")}},{key:"on",value:function(e,t){this._callbacks[e]=t}},{key:"off",value:function(e){e?delete this._callbacks[e]:this._callbacks={}}},{key:"clear",value:function(){u(this._thisWin,"message",this._listener)}},{key:"_handleReq",value:function(e,t,n,o){var r=this._callbacks[o];if("function"==typeof r){var s=r(t.$data),a=""+n+l+o,u=e.source,f=this._domain;if((0,i.isPromise)(s))return void s.then(function(e){u.postMessage({$type:a,$data:{status:v,message:e}},f)},function(e){u.postMessage({$type:a,$data:{status:y,message:e}},f)});if("boolean"==typeof s)s={status:s?v:y,message:s};else{var c=s.status;s="string"==typeof c?s:{status:v,message:s}}u.postMessage({$type:a,$data:s},f)}}},{key:"_handleResp",value:function(e,t,n,o){var r=t.$data,i=r.status.toLowerCase()===v?"resolve":"reject",s=""+n+o;this._promises[s]&&(this._promises[s][i](r.message),delete this._promises[s])}}]),e}();"undefined"!=typeof window&&(window.CrossMessage=w)},{"./utils":2}],2:[function(e,t,n){"use strict";function o(e){var t="undefined"==typeof e?"undefined":f(e);return"function"===t||"object"===t&&!!e}function r(e){if(!o(e))return e;if("function"==typeof Object.assign)return Object.assign.apply(null,arguments);var t,n,r,i;for(r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s)}else e[n]=t[n]}return e}function i(e){return o(e)&&"function"==typeof e.then}function s(e){c=e}function a(){return c}function u(){var e=!!window.document.addEventListener;return{addEventListener:e?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},removeEventListener:e?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)}}}Object.defineProperty(n,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.isObject=o,n.assign=r,n.isPromise=i,n.setPromise=s,n.getPromise=a,n.eventListener=u;var c="undefined"==typeof Promise?null:Promise},{}]},{},[1]);