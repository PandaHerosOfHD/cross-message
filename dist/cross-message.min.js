!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CrossMessage=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=e("./utils"),s=(0,r.eventListener)(),a=s.addEventListener,u=s.removeEventListener,c=0,f="__request-",l="__response-",d=new RegExp("^(\\d+)"+f+"(.*)"),p=new RegExp("^(\\d+)"+l+"(.*)"),v="resolved",m="rejected",y="notFound",h=n.CrossMessage=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!(0,r.getPromise)())throw new Error('No "Promise" feature available in browser, must specify another promise lib');if(!n.otherWindow)throw new Error('Must specify "otherWindow" to communicate with');n=(0,r.assign)({thisWindow:window,domain:"*",knownWindowOnly:!0},n);var i=this._thisWin=n.thisWindow,s=this._otherWin=n.otherWindow,u=!!n.knownWindowOnly;this._domain=n.domain,this._callbacks={},this._promises={},a(i,"message",this._listener=function(e){if(!u||s===e.source){t._domain||(t._domain=e.origin||e.originalEvent.origin);var n=e.data,o=void 0,i=void 0;(o=n.$type.match(d))?t._handleReq(e,n,o[1],o[2]):(i=n.$type.match(p))&&t._handleResp(e,n,i[1],i[2])}})}return i(e,null,[{key:"usePromise",value:function(e){(0,r.setPromise)(e)}}]),i(e,[{key:"post",value:function(e,t){var n=this,o=(0,r.getPromise)();return new o(function(o,i){++c,n._otherWin.postMessage({$type:""+c+f+e,$data:t},n._domain),n._promises[""+c+e]={resolve:o,reject:i}})}},{key:"on",value:function(e,t){this._callbacks[e]=t}},{key:"off",value:function(e){e?delete this._callbacks[e]:this._callbacks={}}},{key:"clear",value:function(){u(this._thisWin,"message",this._listener)}},{key:"_handleReq",value:function(e,t,n,o){var i=this._callbacks[o],s="function"==typeof i?i(t.$data):{status:y,message:"No specified callback of "+o},a=""+n+l+o,u=e.source,c=this._domain;if((0,r.isPromise)(s))return void s.then(function(e){u.postMessage({$type:a,$data:{status:v,message:e}},c)},function(e){u.postMessage({$type:a,$data:{status:m,message:e}},c)});if((0,r.isObject)(s)){var f=s.status;s="string"==typeof f?s:{status:v,message:s}}else s={status:s?v:m,message:s};u.postMessage({$type:a,$data:s},c)}},{key:"_handleResp",value:function(e,t,n,o){var i=t.$data,r=i.status.toLowerCase()===v?"resolve":"reject",s=""+n+o;this._promises[s][r](i),delete this._promises[s]}}]),e}();"undefined"!=typeof window&&(window.CrossMessage=h)},{"./utils":2}],2:[function(e,t,n){"use strict";function o(e){var t="undefined"==typeof e?"undefined":c(e);return"function"===t||"object"===t&&!!e}function i(e){if(!o(e))return e;if("function"==typeof Object.assign)return Object.assign.apply(null,arguments);var t,n,i,r;for(i=1,r=arguments.length;r>i;i++){t=arguments[i];for(n in t)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s)}else e[n]=t[n]}return e}function r(e){return o(e)&&"function"==typeof e.then}function s(e){f=e}function a(){return f}function u(){var e=!!window.document.addEventListener;return{addEventListener:e?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},removeEventListener:e?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)}}}Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.isObject=o,n.assign=i,n.isPromise=r,n.setPromise=s,n.getPromise=a,n.eventListener=u;var f="undefined"==typeof Promise?null:Promise},{}]},{},[1]);